<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=5.0">
    <title>WillTube - Will's Digital Video Repository</title>
    <meta name="description" content="Will's personal video collection featuring high-quality content up to 4K resolution">
    <meta name="keywords" content="videos, 4K, streaming, portfolio, tutorials">
    
    <!-- HLS.js for broader browser compatibility -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hls.js/1.4.12/hls.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 11px;
            background: linear-gradient(135deg, #f8f8f8 0%, #e8e8e8 100%);
            color: #333333;
            line-height: 1.4;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 10px;
            background: #ffffff;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-left: 1px solid #dddddd;
            border-right: 1px solid #dddddd;
            min-height: 100vh;
        }

        /* Header Section */
        .header {
            text-align: center;
            padding: 20px 0 15px 0;
        }

        .logo {
            margin-bottom: 8px;
        }

        .logo img {
            max-width: 300px;
            height: auto;
        }

        .subtitle {
            font-size: 13px;
            color: #666666;
            margin-bottom: 20px;
        }

        /* Instructions Section */
        .instructions {
            background: linear-gradient(to bottom, #f0f8ff, #e6f3ff);
            border: 2px solid #4080ff;
            border-radius: 3px;
            padding: 12px;
            margin-bottom: 15px;
            font-size: 11px;
            text-align: left;
            box-shadow: 0 2px 5px rgba(64,128,255,0.1);
        }

        .instructions h3 {
            font-size: 12px;
            margin-bottom: 8px;
            color: #004080;
            border-bottom: 1px solid #cce6ff;
            padding-bottom: 4px;
        }

        /* Search Section */
        .search-section {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px 0;
        }

        .search-box {
            width: 300px;
            height: 22px;
            border: 2px inset #e0e0e0;
            padding: 2px 5px;
            font-size: 11px;
            font-family: Arial, Helvetica, sans-serif;
            background: #ffffff;
        }

        .search-box:focus {
            border-color: #4080ff;
            outline: none;
            box-shadow: 0 0 5px rgba(64,128,255,0.3);
        }

        .search-button {
            height: 26px;
            padding: 0 12px;
            margin-left: 5px;
            background: linear-gradient(to bottom, #4080ff, #2060df);
            border: 1px outset #4080ff;
            font-size: 11px;
            cursor: pointer;
            font-family: Arial, Helvetica, sans-serif;
            color: #ffffff;
            font-weight: bold;
        }

        .search-button:hover {
            background: linear-gradient(to bottom, #5090ff, #3070ef);
        }

        .search-button:active {
            border: 1px inset #2060df;
            background: linear-gradient(to bottom, #2060df, #4080ff);
        }

        /* Featured Section */
        .featured-section {
            margin-bottom: 20px;
        }

        .section-title {
            background: linear-gradient(to bottom, #cc0000, #990000);
            border: 1px solid #660000;
            padding: 6px 12px;
            font-size: 12px;
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 10px;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
            border-radius: 2px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .featured-videos {
            display: flex;
            gap: 22px;
            overflow-x: auto;
            padding: 15px;
            background: linear-gradient(to bottom, #f8f8f8, #f0f0f0);
            border: 1px solid #dddddd;
            border-radius: 3px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }

        .featured-video {
            flex: 0 0 auto;
            width: 210px;
            text-align: center;
            cursor: pointer;
            background: #ffffff;
            border: 1px solid #dddddd;
            border-radius: 2px;
            padding: 8px;
            transition: all 0.2s;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .featured-video:hover {
            border-color: #4080ff;
            box-shadow: 0 2px 8px rgba(64,128,255,0.3);
            transform: translateY(-2px);
        }

        .featured-thumbnail {
            width: 194px;
            height: 146px;
            border: 1px solid #cccccc;
            background: #f5f5f5;
            margin-bottom: 5px;
            position: relative;
            overflow: hidden;
            border-radius: 2px;
        }

        .featured-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .featured-title {
            font-size: 10px;
            color: #cc0000;
            text-decoration: none;
            margin-bottom: 3px;
            line-height: 1.2;
            font-weight: bold;
        }

        .featured-info {
            font-size: 9px;
            color: #666666;
        }

        /* Video Player Section */
        .player-section {
            margin-bottom: 25px;
            display: none;
        }

        .player-container {
            border: 1px solid #cccccc;
            background: #ffffff;
            overflow: hidden;
        }

        .player-content {
            display: flex;
            gap: 30px;
            padding: 18px;
        }

        .video-player {
            flex: 0 0 640px;
            height: 480px;
            background: #000000;
            border: 1px solid #999999;
            position: relative;
            overflow: hidden;
        }

        .video-element {
            width: 100%;
            height: 100%;
            object-fit: contain;
            image-rendering: high-quality;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: optimize-quality;
        }

        /* Custom retro video controls */
        .video-element::-webkit-media-controls-panel {
            background: linear-gradient(to bottom, #f0f0f0, #d0d0d0);
            border-top: 1px solid #999999;
        }

        .video-element::-webkit-media-controls-current-time-display,
        .video-element::-webkit-media-controls-time-remaining-display {
            font-family: 'Courier New', monospace;
            font-size: 10px;
            color: #333333;
        }

        /* Quality selector */
        .quality-selector {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 100;
        }

        .quality-button {
            background: linear-gradient(to bottom, rgba(240,240,240,0.9), rgba(220,220,220,0.9));
            border: 1px outset #d0d0d0;
            padding: 4px 8px;
            font-size: 9px;
            cursor: pointer;
            color: #333333;
            border-radius: 2px;
            font-family: Arial, Helvetica, sans-serif;
        }

        .quality-button:hover {
            background: linear-gradient(to bottom, rgba(255,255,255,0.9), rgba(240,240,240,0.9));
        }

        .quality-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: #ffffff;
            border: 1px solid #cccccc;
            border-radius: 2px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            display: none;
            min-width: 80px;
        }

        .quality-option {
            padding: 4px 8px;
            font-size: 9px;
            cursor: pointer;
            border-bottom: 1px solid #eeeeee;
        }

        .quality-option:last-child {
            border-bottom: none;
        }

        .quality-option:hover {
            background: #f0f0f0;
        }

        .quality-option.active {
            background: #e0e8ff;
            color: #0066cc;
        }

        /* Retro overlay controls for cross-browser compatibility */
        .retro-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to bottom, #f5f5f5, #e8e8e8);
            border-top: 1px solid #cccccc;
            padding: 4px 6px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 10px;
            opacity: 0;
            transition: opacity 0.3s;
            height: 24px;
            box-shadow: inset 0 1px 0 rgba(255,255,255,0.5);
        }

        .video-player:hover .retro-controls {
            opacity: 1;
        }

        .retro-button {
            width: 20px;
            height: 16px;
            background: linear-gradient(to bottom, #f8f8f8, #e0e0e0);
            border: 1px outset #d0d0d0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #333333;
            transition: all 0.1s;
            border-radius: 1px;
        }

        .retro-button:hover {
            background: linear-gradient(to bottom, #ffffff, #f0f0f0);
            border-color: #b0b0b0;
        }

        .retro-button:active {
            border: 1px inset #d0d0d0;
            background: linear-gradient(to bottom, #e0e0e0, #f0f0f0);
        }

        .progress-container {
            flex: 1;
            height: 12px;
            background: linear-gradient(to bottom, #ffffff, #f0f0f0);
            border: 1px inset #d0d0d0;
            margin: 0 4px;
            position: relative;
            cursor: pointer;
            border-radius: 1px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(to bottom, #4080ff, #2060df);
            width: 0%;
            transition: width 0.1s linear;
            position: relative;
            border-radius: 1px;
        }

        .progress-handle {
            position: absolute;
            right: -2px;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 8px;
            background: linear-gradient(to bottom, #ffffff, #e0e0e0);
            border: 1px solid #a0a0a0;
            cursor: grab;
            border-radius: 1px;
        }

        .progress-handle:active {
            cursor: grabbing;
        }

        .time-display {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 9px;
            color: #333333;
            background: transparent;
            padding: 0;
            line-height: 14px;
            white-space: nowrap;
        }

        .time-container {
            display: flex;
            align-items: center;
            gap: 1px;
            min-width: fit-content;
        }

        .volume-container {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .volume-icon {
            width: 16px;
            height: 14px;
            background: linear-gradient(to bottom, #f8f8f8, #e0e0e0);
            border: 1px outset #d0d0d0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            color: #333333;
            border-radius: 1px;
        }

        .volume-icon:hover {
            background: linear-gradient(to bottom, #ffffff, #f0f0f0);
        }

        .volume-slider {
            width: 50px;
            height: 8px;
            background: linear-gradient(to bottom, #ffffff, #f0f0f0);
            border: 1px inset #d0d0d0;
            position: relative;
            cursor: pointer;
            border-radius: 1px;
        }

        .volume-bar {
            height: 100%;
            background: linear-gradient(to bottom, #40c040, #20a020);
            width: 80%;
            position: relative;
            border-radius: 1px;
        }

        .volume-handle {
            position: absolute;
            right: -1px;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 6px;
            background: linear-gradient(to bottom, #ffffff, #e0e0e0);
            border: 1px solid #a0a0a0;
            cursor: grab;
            border-radius: 1px;
        }

        .fullscreen-button {
            width: 50px;
            height: 16px;
            background: linear-gradient(to bottom, #f8f8f8, #e0e0e0);
            border: 1px outset #d0d0d0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            color: #333333;
            border-radius: 1px;
            font-family: Arial, Helvetica, sans-serif;
        }

        .fullscreen-button:hover {
            background: linear-gradient(to bottom, #ffffff, #f0f0f0);
            border-color: #b0b0b0;
        }

        .fullscreen-button:active {
            border: 1px inset #d0d0d0;
            background: linear-gradient(to bottom, #e0e0e0, #f0f0f0);
        }

        /* Buffer indicator */
        .buffer-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(to bottom, #d0d0d0, #c0c0c0);
            width: 0%;
            transition: width 0.3s;
            border-radius: 1px;
        }

        /* Loading spinner */
        .loading-spinner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 32px;
            height: 32px;
            border: 3px solid #cccccc;
            border-top: 3px solid #0066cc;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: none;
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Pixelated effect overlay */
        .pixel-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(90deg, transparent 98%, rgba(0,0,0,0.1) 100%),
                linear-gradient(180deg, transparent 98%, rgba(0,0,0,0.1) 100%);
            background-size: 2px 2px;
            pointer-events: none;
            opacity: 0.3;
        }

        .video-info-panel {
            flex: 1;
            min-width: 330px;
        }

        .video-title-playing {
            font-size: 13px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333333;
            line-height: 1.2;
        }

        .video-stats {
            font-size: 10px;
            color: #666666;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #eeeeee;
        }

        .video-description-playing {
            font-size: 11px;
            color: #666666;
            line-height: 1.4;
            margin-bottom: 12px;
        }

        .video-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .action-button {
            font-size: 10px;
            padding: 3px 8px;
            border: 1px solid #cccccc;
            background: #f8f8f8;
            color: #333333;
            text-decoration: none;
            cursor: pointer;
        }

        .action-button:hover {
            background: #eeeeee;
            border-color: #999999;
        }

        /* Responsive player */
        @media (max-width: 600px) {
            .player-content {
                flex-direction: column;
                gap: 10px;
            }
            
            .video-player {
                flex: none;
                width: 100%;
                height: 200px;
            }
        }

        /* Gallery Section */
        .gallery-section {
            margin-bottom: 30px;
        }

        .category-filters {
            display: flex;
            gap: 8px;
            margin: 10px 0 15px 0;
            flex-wrap: wrap;
        }

        .category-button {
            padding: 4px 12px;
            background: linear-gradient(to bottom, #f8f8f8, #e0e0e0);
            border: 1px outset #d0d0d0;
            cursor: pointer;
            font-size: 10px;
            color: #333333;
            font-family: Arial, Helvetica, sans-serif;
            transition: all 0.1s;
            border-radius: 1px;
        }

        .category-button:hover {
            background: linear-gradient(to bottom, #ffffff, #f0f0f0);
            border-color: #b0b0b0;
        }

        .category-button.active {
            background: linear-gradient(to bottom, #4080ff, #2060df);
            color: white;
            border: 1px inset #2060df;
        }

        .category-button:active {
            border: 1px inset #d0d0d0;
            background: linear-gradient(to bottom, #e0e0e0, #f0f0f0);
        }

        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 10px;
        }

        .video-item {
            cursor: pointer;
            border: 1px solid #ffffff;
            padding: 8px;
            transition: border-color 0.2s;
        }

        .video-item:hover {
            border: 1px solid #cccccc;
            background: #fafafa;
        }

        .video-item.hidden {
            display: none;
        }

        .video-thumbnail {
            width: 100%;
            height: 168px;
            border: 1px solid #cccccc;
            background: #f5f5f5;
            margin-bottom: 8px;
            overflow: hidden;
            position: relative;
        }

        .video-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-info h4 {
            font-size: 11px;
            color: #0066cc;
            text-decoration: underline;
            margin-bottom: 4px;
            line-height: 1.2;
        }

        .video-description {
            font-size: 10px;
            color: #666666;
            line-height: 1.3;
        }

        .video-meta {
            font-size: 9px;
            color: #999999;
            margin-top: 4px;
        }

        .category-tag {
            display: inline-block;
            background: #f0f0f0;
            border: 1px solid #cccccc;
            padding: 1px 4px;
            font-size: 8px;
            color: #666666;
            margin-top: 2px;
            border-radius: 1px;
        }

        /* Footer */
        .footer {
            border-top: 1px solid #cccccc;
            padding: 15px 0;
            text-align: center;
            font-size: 10px;
            color: #666666;
            margin-top: 30px;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                padding: 0 5px;
            }

            .header {
                padding: 15px 0 10px 0;
            }

            .logo-placeholder {
                width: 250px;
                height: 60px;
                font-size: 10px;
            }

            .subtitle {
                font-size: 12px;
                margin-bottom: 15px;
            }

            .instructions {
                padding: 10px;
                font-size: 10px;
                margin-bottom: 10px;
            }

            .instructions h3 {
                font-size: 11px;
                margin-bottom: 6px;
            }

            .search-section {
                padding: 10px 0;
                margin-bottom: 15px;
            }

            .search-box {
                width: 250px;
                height: 28px;
                font-size: 12px;
            }

            .search-button {
                height: 32px;
                padding: 0 10px;
                font-size: 10px;
            }

            .section-title {
                padding: 4px 8px;
                font-size: 11px;
                margin-bottom: 8px;
            }

            .featured-videos {
                padding: 8px;
                gap: 10px;
            }

            .featured-video {
                width: 120px;
                padding: 4px;
            }

            .featured-thumbnail {
                width: 112px;
                height: 84px;
            }

            .featured-title {
                font-size: 9px;
                margin-bottom: 2px;
            }

            .featured-info {
                font-size: 8px;
            }

            .category-filters {
                gap: 5px;
                margin: 8px 0 10px 0;
            }

            .category-button {
                padding: 3px 8px;
                font-size: 9px;
            }

            .video-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 10px;
            }

            .video-item {
                padding: 6px;
            }

            .video-thumbnail {
                height: 80px;
            }

            .video-info h4 {
                font-size: 10px;
                margin-bottom: 3px;
            }

            .video-description {
                font-size: 9px;
                line-height: 1.2;
            }

            .video-meta {
                font-size: 8px;
                margin-top: 3px;
            }

            .category-tag {
                font-size: 7px;
                padding: 1px 3px;
                margin-top: 2px;
            }

            .footer {
                padding: 10px 0;
                font-size: 9px;
                margin: 20px -5px 0 -5px;
            }
        }

        /* Mobile player optimizations */
        @media (max-width: 768px) {
            .player-content {
                flex-direction: column;
                gap: 10px;
                padding: 8px;
            }
            
            .video-player {
                flex: none;
                width: 100%;
                height: 220px;
            }

            .video-info-panel {
                min-width: auto;
            }

            .video-title-playing {
                font-size: 12px;
                margin-bottom: 6px;
            }

            .video-stats {
                font-size: 9px;
                margin-bottom: 8px;
                padding-bottom: 6px;
            }

            .video-description-playing {
                font-size: 10px;
                margin-bottom: 8px;
            }

            .video-actions {
                gap: 6px;
            }

            .action-button {
                font-size: 9px;
                padding: 4px 8px;
            }
        }

        /* Mobile video controls */
        @media (max-width: 768px) {
            .retro-controls {
                padding: 6px 4px;
                gap: 4px;
                height: 32px;
            }

            .retro-button {
                width: 24px;
                height: 20px;
                font-size: 12px;
            }

            .time-container {
                gap: 1px;
            }

            .time-display {
                font-size: 8px;
            }

            .volume-container {
                gap: 2px;
            }

            .volume-icon {
                width: 20px;
                height: 18px;
                font-size: 10px;
            }

            .volume-slider {
                width: 30px;
                height: 10px;
            }

            .progress-container {
                margin: 0 2px;
                height: 16px;
            }

            .fullscreen-button {
                width: 40px;
                height: 20px;
                font-size: 8px;
            }

            .quality-selector {
                top: 5px;
                right: 5px;
            }

            .quality-button {
                padding: 6px 10px;
                font-size: 10px;
            }
        }

        /* Very small screens (phones in portrait) */
        @media (max-width: 480px) {
            .container {
                padding: 0 3px;
            }

            .search-box {
                width: 200px;
                height: 26px;
            }

            .search-button {
                height: 30px;
                padding: 0 8px;
                font-size: 9px;
            }

            .featured-videos {
                justify-content: flex-start;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .featured-video {
                width: 100px;
                flex-shrink: 0;
            }

            .featured-thumbnail {
                width: 92px;
                height: 69px;
            }

            .video-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 8px;
            }

            .video-player {
                height: 180px;
            }

            .category-filters {
                justify-content: flex-start;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                padding-bottom: 5px;
            }

            .category-button {
                flex-shrink: 0;
                white-space: nowrap;
            }
        }

        /* iOS Safari specific optimizations */
        @supports (-webkit-touch-callout: none) {
            .video-element {
                -webkit-playsinline: true;
                playsinline: true;
            }

            .retro-controls {
                -webkit-user-select: none;
                user-select: none;
                -webkit-touch-callout: none;
                touch-action: manipulation;
            }

            .progress-container, .volume-slider {
                -webkit-touch-callout: none;
                touch-action: pan-x;
            }

            /* Enhanced iOS controls */
            .ios-controls {
                background: rgba(0, 0, 0, 0.8);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border-radius: 8px;
                margin: 8px;
                padding: 8px 12px;
            }

            .ios-progress-track {
                height: 6px;
                background: rgba(255, 255, 255, 0.3);
                border-radius: 3px;
                overflow: hidden;
            }

            .ios-progress-fill {
                height: 100%;
                background: #ffffff;
                border-radius: 3px;
                transition: width 0.1s ease;
            }

            .ios-time-display {
                color: #ffffff;
                font-size: 12px;
                font-weight: 500;
            }

            .ios-button {
                background: rgba(255, 255, 255, 0.2);
                border: none;
                border-radius: 6px;
                color: #ffffff;
                padding: 8px 12px;
                font-size: 12px;
                font-weight: 500;
                min-height: 44px;
                min-width: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
            }

            .ios-button:active {
                background: rgba(255, 255, 255, 0.4);
                transform: scale(0.95);
            }
        }

        /* Touch-friendly improvements */
        @media (hover: none) and (pointer: coarse) {
            .video-item:hover {
                border: 1px solid #ffffff;
                background: #ffffff;
                transform: none;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }

            .featured-video:hover {
                border-color: #dddddd;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                transform: none;
            }

            .category-button:hover {
                background: linear-gradient(to bottom, #f8f8f8, #e0e0e0);
                border-color: #d0d0d0;
                color: #333333;
                box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            }

            .retro-button:hover {
                background: linear-gradient(to bottom, #f8f8f8, #e0e0e0);
            }

            .action-button:hover {
                background: #f8f8f8;
                border-color: #cccccc;
            }

            /* Make controls always visible on touch devices */
            .retro-controls {
                opacity: 1;
            }

            /* Larger touch targets */
            .retro-button, .action-button, .category-button {
                min-height: 44px;
                min-width: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .progress-container, .volume-slider {
                min-height: 44px;
                display: flex;
                align-items: center;
            }

            /* iOS specific touch improvements */
            .retro-button, .ios-button {
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
            }

            .progress-container {
                touch-action: pan-x;
                -webkit-touch-callout: none;
            }

            .volume-slider {
                touch-action: pan-x;
                -webkit-touch-callout: none;
            }
        }

        /* Landscape phone optimization */
        @media (max-width: 768px) and (orientation: landscape) {
            .video-player {
                height: 160px;
            }

            .player-content {
                flex-direction: row;
                gap: 12px;
            }

            .video-player {
                flex: 0 0 280px;
                height: 160px;
            }

            .video-info-panel {
                flex: 1;
                min-width: 200px;
            }
        }

        /* Placeholder for logo */
        .logo-placeholder {
            width: 300px;
            height: 80px;
            background: #f0f0f0;
            border: 2px dashed #cccccc;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            color: #999;
            font-size: 12px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header with Logo -->
        <div class="header">
            <div class="logo">
                <!-- Replace this placeholder with your WillTube PNG logo -->
                <div class="logo-placeholder">
                    WillTube Logo<br>
                    <small>(Replace with your PNG)</small>
                </div>
                <!-- <img src="willtube-logo.png" alt="WillTube"> -->
            </div>
            <div class="subtitle">Will's Digital Video Repository - Now with 4K HLS Streaming</div>
        </div>

        <!-- Instructions Section -->
        <div class="instructions">
            <h3>Welcome to WillTube - HLS Edition</h3>
            <p>Browse my collection of high-quality videos powered by adaptive HLS streaming. Videos automatically adjust quality based on your connection, delivering crystal-clear playback up to 4K resolution. Click on any video thumbnail to watch it in the player below. Use the search function to quickly find specific content.</p>
        </div>

        <!-- Search Section -->
        <div class="search-section">
            <input type="text" class="search-box" placeholder="Search Videos" id="searchInput">
            <button class="search-button" onclick="searchVideos()">Search Videos</button>
        </div>

        <!-- Featured Releases Section -->
        <div class="featured-section">
            <div class="section-title">Featured Releases</div>
            <div class="featured-videos" id="featuredVideos">
                <!-- Featured videos will be populated here -->
            </div>
        </div>

        <!-- Video Player Section -->
        <div class="player-section" id="playerSection">
            <div class="section-title">Now Playing</div>
            <div class="player-container">
                <div class="player-content">
                    <div class="video-player">
                        <video class="video-element" id="mainPlayer" 
                               controls 
                               playsinline 
                               webkit-playsinline
                               preload="metadata">
                            <source id="videoSource" src="" type="application/x-mpegURL">
                            Your browser does not support HLS video playback.
                        </video>
                        <div class="pixel-overlay"></div>
                        <div class="loading-spinner" id="loadingSpinner"></div>
                        
                        <!-- Quality Selector -->
                        <div class="quality-selector">
                            <div class="quality-button" onclick="toggleQualityDropdown()">
                                Quality: <span id="currentQuality">Auto</span>
                            </div>
                            <div class="quality-dropdown" id="qualityDropdown">
                                <!-- Quality options will be populated dynamically -->
                            </div>
                        </div>
                        
                        <div class="retro-controls" id="retroControls">
                            <div class="retro-button" id="playPauseBtn" onclick="togglePlayPause()">▶</div>
                            <div class="retro-button" onclick="stopVideo()">■</div>
                            <div class="time-container">
                                <div class="time-display" id="currentTime">00:00</div>
                                <div class="time-display">/</div>
                                <div class="time-display" id="duration">00:00</div>
                            </div>
                            <div class="volume-container">
                                <div class="volume-icon" onclick="toggleMute()">🔊</div>
                                <div class="volume-slider" onclick="setVolume(event)">
                                    <div class="volume-bar" id="volumeBar">
                                        <div class="volume-handle"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="progress-container" onclick="seekVideo(event)">
                                <div class="buffer-bar" id="bufferBar"></div>
                                <div class="progress-bar" id="progressBar">
                                    <div class="progress-handle"></div>
                                </div>
                            </div>
                            <div class="fullscreen-button" onclick="toggleFullscreen()">Fullscreen</div>
                        </div>
                    </div>
                    <div class="video-info-panel">
                        <div class="video-title-playing" id="currentTitle">Video Title</div>
                        <div class="video-stats" id="currentStats">Views: 0 | Added: Today</div>
                        <div class="video-description-playing" id="currentDescription">Video description will appear here when you select a video to play.</div>
                        <div class="video-actions">
                            <button class="action-button" onclick="shareVideo()">Share</button>
                            <button class="action-button" onclick="toggleFavorite()">Favorite</button>
                            <button class="action-button" onclick="downloadVideo()">Download</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gallery Section -->
        <div class="gallery-section">
            <div class="section-title">Video Gallery</div>
            <div class="category-filters" id="categoryFilters">
                <!-- Category buttons will be populated here -->
            </div>
            <div class="video-grid" id="videoGrid">
                <!-- Video items will be populated here -->
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>&copy; 2024 WillTube | Powered by <a href="#">Bunny CDN</a> | HLS Adaptive Streaming up to 4K</p>
            <p style="margin-top: 5px; font-size: 9px;">Relive the golden age of video sharing with modern streaming technology</p>
        </div>
    </div>

    <script>
        // ============================================
        // WILLTUBE HLS BUNNY CDN INTEGRATION SYSTEM
        // ============================================
        
        // Configuration
        const BUNNY_CONFIG = {
            pullZone: 'vz-8a765295-4d7', // Your Bunny pull zone
            baseUrl: 'https://vz-8a765295-4d7.b-cdn.net'
        };

        // Global variables
        let hlsInstance = null;
        let currentVideoId = null;
        let isIOS = false;
        let isiOSSafari = false;

        // Detect iOS and Safari
        function detectIOSAndSafari() {
            const userAgent = navigator.userAgent.toLowerCase();
            isIOS = /iphone|ipad|ipod/.test(userAgent);
            isiOSSafari = isIOS && /safari/.test(userAgent) && !/chrome|crios|fxios/.test(userAgent);
            
            console.log('Device detection:', { isIOS, isiOSSafari });
            return { isIOS, isiOSSafari };
        }

        // ============================================
        // VIDEO DATABASE - SIMPLIFIED FOR HLS
        // ============================================
        
        // Define your collections/categories
        const COLLECTIONS = {
            tutorials: { name: 'Tutorials', color: '#4080ff' },
            projects: { name: 'Projects', color: '#cc0000' },
            ani101: { name: 'Ani101', color: '#ff8040' },
            creative: { name: 'Creative', color: '#40ff80' },
            demos: { name: 'Demos', color: '#8040ff' }
        };

        // Video database - simplified for HLS (no resolution arrays needed)
        const VIDEO_DATABASE = {
            // Your existing video
            'e9ce8e87-763b-48f4-8c70-b19dff16be49': {
                title: 'CTA Parallax Animation',
                description: 'Fun homework assignment. Play it on a loop and pretend like you\'re forever stuck on the best line in all of Chicago!',
                collection: 'ani101',
                views: 654,
                uploadDate: '2024-11-20',
                featured: true
            },
            
            // Sample videos for demonstration
            'b3840759-4bb3-4fb5-818b-4b0e5760c98a': {
                title: 'React Component Tutorial',
                description: 'Learn how to build reusable React components with modern hooks and TypeScript.',
                collection: 'tutorials',
                views: 1243,
                uploadDate: '2024-12-15',
                featured: true
            },
            
            'sample-video-3': {
                title: 'Portfolio Website Build',
                description: 'Complete walkthrough of building a modern portfolio website from scratch.',
                collection: 'projects',
                views: 892,
                uploadDate: '2024-12-10',
                featured: false
            },
            
            'sample-video-4': {
                title: 'Creative Coding Experiments',
                description: 'Exploring generative art and creative coding techniques with p5.js.',
                collection: 'creative',
                views: 567,
                uploadDate: '2024-12-05',
                featured: true
            },
            
            'sample-video-5': {
                title: 'API Integration Demo',
                description: 'Demonstrating how to integrate third-party APIs into your web applications.',
                collection: 'demos',
                views: 734,
                uploadDate: '2024-11-28',
                featured: false
            },
            
            'sample-video-6': {
                title: 'Advanced CSS Animations',
                description: 'Deep dive into CSS animations, transitions, and keyframe techniques.',
                collection: 'tutorials',
                views: 1456,
                uploadDate: '2024-11-25',
                featured: false
            }
        };

        // ============================================
        // HLS URL GENERATORS
        // ============================================
        
        /**
         * Generate Bunny CDN HLS URL
         * @param {string} videoId - The video ID
         * @returns {string} Complete HLS playlist URL
         */
        function getBunnyHLSUrl(videoId) {
            return `${BUNNY_CONFIG.baseUrl}/${videoId}/playlist.m3u8`;
        }

        /**
         * Generate Bunny CDN thumbnail URL
         * @param {string} videoId - The video ID
         * @returns {string} Complete thumbnail URL
         */
        function getBunnyThumbnailUrl(videoId) {
            return `${BUNNY_CONFIG.baseUrl}/${videoId}/thumbnail.jpg`;
        }

        /**
         * Get video metadata with generated URLs
         * @param {string} videoId - The video ID
         * @returns {object} Video metadata with URLs
         */
        function getVideoData(videoId) {
            const video = VIDEO_DATABASE[videoId];
            if (!video) return null;
            
            return {
                id: videoId,
                ...video,
                thumbnailUrl: getBunnyThumbnailUrl(videoId),
                hlsUrl: getBunnyHLSUrl(videoId)
            };
        }

        // ============================================
        // EASY VIDEO MANAGEMENT FUNCTIONS
        // ============================================
        
        /**
         * Add a new video to the database
         * @param {string} videoId - Bunny video ID
         * @param {object} metadata - Video metadata
         */
        function addVideo(videoId, metadata) {
            VIDEO_DATABASE[videoId] = {
                featured: false,
                views: 0,
                uploadDate: new Date().toISOString().split('T')[0],
                ...metadata
            };
            
            // Refresh the page content
            initializePage();
        }

        /**
         * Set featured videos (max 4)
         * @param {array} videoIds - Array of video IDs to feature
         */
        function setFeaturedVideos(videoIds) {
            // Reset all featured status
            Object.keys(VIDEO_DATABASE).forEach(id => {
                VIDEO_DATABASE[id].featured = false;
            });
            
            // Set new featured videos
            videoIds.slice(0, 4).forEach(id => {
                if (VIDEO_DATABASE[id]) {
                    VIDEO_DATABASE[id].featured = true;
                }
            });
            
            // Refresh featured section
            populateFeaturedVideos();
        }

        /**
         * Get videos by collection
         * @param {string} collection - Collection name
         * @returns {array} Array of video data
         */
        function getVideosByCollection(collection) {
            return Object.keys(VIDEO_DATABASE)
                .filter(id => VIDEO_DATABASE[id].collection === collection)
                .map(id => getVideoData(id))
                .filter(video => video !== null);
        }

        /**
         * Get featured videos
         * @returns {array} Array of featured video data
         */
        function getFeaturedVideos() {
            return Object.keys(VIDEO_DATABASE)
                .filter(id => VIDEO_DATABASE[id].featured)
                .map(id => getVideoData(id))
                .filter(video => video !== null)
                .slice(0, 4);
        }

        // ============================================
        // HLS PLAYER SETUP AND MANAGEMENT
        // ============================================
        
        /**
         * Initialize HLS player with iOS optimizations
         * @param {string} hlsUrl - HLS playlist URL
         */
        function initializeHLSPlayer(hlsUrl) {
            const video = document.getElementById('mainPlayer');
            const loadingSpinner = document.getElementById('loadingSpinner');
            
            // Show loading spinner
            loadingSpinner.style.display = 'block';
            
            // Destroy existing HLS instance
            if (hlsInstance) {
                hlsInstance.destroy();
                hlsInstance = null;
            }

            // iOS-specific video setup
            if (isIOS) {
                video.setAttribute('playsinline', 'true');
                video.setAttribute('webkit-playsinline', 'true');
                video.setAttribute('preload', 'metadata');
                
                // Use native controls on iOS for better compatibility
                video.controls = true;
                
                // Hide custom controls on iOS
                const retroControls = document.getElementById('retroControls');
                if (retroControls) {
                    retroControls.style.display = 'none';
                }
                
                // Hide quality selector on iOS (native HLS handles this)
                const qualitySelector = document.querySelector('.quality-selector');
                if (qualitySelector) {
                    qualitySelector.style.display = 'none';
                }
            } else {
                // Use custom controls on non-iOS devices
                video.controls = false;
                
                const retroControls = document.getElementById('retroControls');
                if (retroControls) {
                    retroControls.style.display = 'flex';
                }
                
                const qualitySelector = document.querySelector('.quality-selector');
                if (qualitySelector) {
                    qualitySelector.style.display = 'block';
                }
            }

            // Check for native HLS support (iOS Safari and some others)
            if (video.canPlayType('application/vnd.apple.mpegurl')) {
                console.log('Using native HLS support');
                video.src = hlsUrl;
                
                if (isIOS) {
                    setupIOSVideoHandling(video);
                } else {
                    setupNativeHLSQualityControl(video);
                }
                
                loadingSpinner.style.display = 'none';
                
            } else if (Hls.isSupported() && !isIOS) {
                console.log('Using HLS.js');
                // Use HLS.js for non-iOS browsers
                hlsInstance = new Hls({
                    enableWorker: true,
                    lowLatencyMode: false,
                    backBufferLength: 90,
                    maxBufferLength: 30,
                    maxMaxBufferLength: 600
                });
                
                hlsInstance.loadSource(hlsUrl);
                hlsInstance.attachMedia(video);
                
                hlsInstance.on(Hls.Events.MANIFEST_PARSED, function(event, data) {
                    console.log('HLS manifest loaded, found ' + data.levels.length + ' quality levels');
                    populateQualityDropdown(data.levels);
                    loadingSpinner.style.display = 'none';
                });
                
                hlsInstance.on(Hls.Events.LEVEL_SWITCHED, function(event, data) {
                    const level = hlsInstance.levels[data.level];
                    updateCurrentQuality(level);
                });
                
                hlsInstance.on(Hls.Events.ERROR, function(event, data) {
                    console.error('HLS error:', data);
                    if (data.fatal) {
                        switch (data.type) {
                            case Hls.ErrorTypes.NETWORK_ERROR:
                                console.log('Network error, trying to recover...');
                                hlsInstance.startLoad();
                                break;
                            case Hls.ErrorTypes.MEDIA_ERROR:
                                console.log('Media error, trying to recover...');
                                hlsInstance.recoverMediaError();
                                break;
                            default:
                                hlsInstance.destroy();
                                loadingSpinner.style.display = 'none';
                                break;
                        }
                    }
                });
            } else {
                console.error('HLS is not supported in this browser');
                loadingSpinner.style.display = 'none';
                alert('Your browser does not support HLS video playback. Please try a modern browser.');
                return;
            }

            // Setup common video events
            setupCommonVideoEvents(video, loadingSpinner);
        }

        /**
         * Setup iOS-specific video handling
         * @param {HTMLVideoElement} video - Video element
         */
        function setupIOSVideoHandling(video) {
            console.log('Setting up iOS video handling');
            
            // iOS handles quality switching natively
            const qualityDropdown = document.getElementById('qualityDropdown');
            qualityDropdown.innerHTML = '<div class="quality-option active">Auto (iOS Native)</div>';
            document.getElementById('currentQuality').textContent = 'Auto';
            
            // Add iOS-specific event listeners
            video.addEventListener('webkitbeginfullscreen', function() {
                console.log('iOS: Entered fullscreen');
            });
            
            video.addEventListener('webkitendfullscreen', function() {
                console.log('iOS: Exited fullscreen');
            });
            
            // Handle iOS playback ready
            video.addEventListener('loadedmetadata', function() {
                console.log('iOS: Video metadata loaded');
            });
            
            // Better error handling for iOS
            video.addEventListener('error', function(e) {
                console.error('iOS video error:', e);
                const error = video.error;
                if (error) {
                    console.error('Error code:', error.code, 'Message:', error.message);
                }
            });
        }

        /**
         * Setup common video events for all platforms
         * @param {HTMLVideoElement} video - Video element
         * @param {HTMLElement} loadingSpinner - Loading spinner element
         */
        function setupCommonVideoEvents(video, loadingSpinner) {
            video.addEventListener('loadstart', function() {
                loadingSpinner.style.display = 'block';
            });

            video.addEventListener('canplay', function() {
                loadingSpinner.style.display = 'none';
            });

            video.addEventListener('waiting', function() {
                loadingSpinner.style.display = 'block';
            });

            video.addEventListener('playing', function() {
                loadingSpinner.style.display = 'none';
            });
            
            // Handle stalled playback
            video.addEventListener('stalled', function() {
                console.log('Video playback stalled');
                loadingSpinner.style.display = 'block';
            });
            
            video.addEventListener('suspend', function() {
                console.log('Video loading suspended');
            });
            
            video.addEventListener('abort', function() {
                console.log('Video loading aborted');
                loadingSpinner.style.display = 'none';
            });
        }

        /**
         * Setup quality control for native HLS (Safari)
         * @param {HTMLVideoElement} video - Video element
         */
        function setupNativeHLSQualityControl(video) {
            // For native HLS, we can't easily access quality levels
            // Show a simplified quality selector
            const qualityDropdown = document.getElementById('qualityDropdown');
            qualityDropdown.innerHTML = '<div class="quality-option active">Auto</div>';
            document.getElementById('currentQuality').textContent = 'Auto';
        }

        /**
         * Populate quality dropdown with available levels
         * @param {Array} levels - HLS quality levels
         */
        function populateQualityDropdown(levels) {
            const qualityDropdown = document.getElementById('qualityDropdown');
            qualityDropdown.innerHTML = '';

            // Add auto quality option
            const autoOption = document.createElement('div');
            autoOption.className = 'quality-option active';
            autoOption.textContent = 'Auto';
            autoOption.onclick = () => setQuality(-1);
            qualityDropdown.appendChild(autoOption);

            // Add manual quality options
            levels.forEach((level, index) => {
                const option = document.createElement('div');
                option.className = 'quality-option';
                
                // Format quality label
                const height = level.height;
                let qualityLabel = height + 'p';
                if (height >= 2160) qualityLabel = '4K';
                else if (height >= 1440) qualityLabel = '1440p';
                else if (height >= 1080) qualityLabel = '1080p';
                else if (height >= 720) qualityLabel = '720p';
                else if (height >= 480) qualityLabel = '480p';
                
                option.textContent = qualityLabel;
                option.onclick = () => setQuality(index);
                qualityDropdown.appendChild(option);
            });
        }

        /**
         * Set video quality
         * @param {number} levelIndex - Quality level index (-1 for auto)
         */
        function setQuality(levelIndex) {
            if (!hlsInstance) return;

            const qualityOptions = document.querySelectorAll('.quality-option');
            qualityOptions.forEach(option => option.classList.remove('active'));

            if (levelIndex === -1) {
                // Auto quality
                hlsInstance.currentLevel = -1;
                document.getElementById('currentQuality').textContent = 'Auto';
                qualityOptions[0].classList.add('active');
            } else {
                // Manual quality
                hlsInstance.currentLevel = levelIndex;
                const level = hlsInstance.levels[levelIndex];
                updateCurrentQuality(level);
                qualityOptions[levelIndex + 1].classList.add('active');
            }

            // Hide dropdown
            document.getElementById('qualityDropdown').style.display = 'none';
        }

        /**
         * Update current quality display
         * @param {object} level - HLS quality level
         */
        function updateCurrentQuality(level) {
            const height = level.height;
            let qualityLabel = height + 'p';
            if (height >= 2160) qualityLabel = '4K';
            else if (height >= 1440) qualityLabel = '1440p';
            else if (height >= 1080) qualityLabel = '1080p';
            else if (height >= 720) qualityLabel = '720p';
            else if (height >= 480) qualityLabel = '480p';
            
            document.getElementById('currentQuality').textContent = qualityLabel;
        }

        /**
         * Toggle quality dropdown visibility
         */
        function toggleQualityDropdown() {
            const dropdown = document.getElementById('qualityDropdown');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }

        // Close quality dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const qualitySelector = document.querySelector('.quality-selector');
            const dropdown = document.getElementById('qualityDropdown');
            
            if (!qualitySelector.contains(event.target)) {
                dropdown.style.display = 'none';
            }
        });

        // ============================================
        // DISPLAY FUNCTIONS
        // ============================================
        
        /**
         * Populate featured videos section
         */
        function populateFeaturedVideos() {
            const featuredContainer = document.getElementById('featuredVideos');
            const featuredVideos = getFeaturedVideos();
            
            featuredContainer.innerHTML = '';
            
            featuredVideos.forEach(video => {
                const featuredDiv = document.createElement('div');
                featuredDiv.className = 'featured-video';
                featuredDiv.onclick = () => playVideo(video.id);
                
                featuredDiv.innerHTML = `
                    <div class="featured-thumbnail">
                        <img src="${video.thumbnailUrl}" alt="${video.title}" 
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQwIiBoZWlnaHQ9IjEwNSIgdmlld0JveD0iMCAwIDE0MCAxMDUiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNDAiIGhlaWdodD0iMTA1IiBmaWxsPSIjY2NjY2NjIi8+Cjx0ZXh0IHg9IjcwIiB5PSI1MiIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjEyIiBmaWxsPSIjNjY2NjY2IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+VmlkZW88L3RleHQ+Cjwvc3ZnPg=='">
                    </div>
                    <div class="featured-title">${video.title}</div>
                    <div class="featured-info">Added: ${formatDate(video.uploadDate)}<br>Views: ${video.views.toLocaleString()}</div>
                `;
                
                featuredContainer.appendChild(featuredDiv);
            });
        }

        /**
         * Populate category filters
         */
        function populateCategoryFilters() {
            const filtersContainer = document.getElementById('categoryFilters');
            filtersContainer.innerHTML = '';
            
            // Add "All Videos" button
            const allButton = document.createElement('div');
            allButton.className = 'category-button active';
            allButton.textContent = 'All Videos';
            allButton.onclick = () => filterByCategory('all');
            filtersContainer.appendChild(allButton);
            
            // Add collection buttons
            Object.keys(COLLECTIONS).forEach(collectionKey => {
                const collection = COLLECTIONS[collectionKey];
                const button = document.createElement('div');
                button.className = 'category-button';
                button.textContent = collection.name;
                button.onclick = () => filterByCategory(collectionKey);
                filtersContainer.appendChild(button);
            });
        }

        /**
         * Populate video gallery
         */
        function populateVideoGallery() {
            const gridContainer = document.getElementById('videoGrid');
            gridContainer.innerHTML = '';
            
            Object.keys(VIDEO_DATABASE).forEach(videoId => {
                const video = getVideoData(videoId);
                if (!video) return;
                
                const videoDiv = document.createElement('div');
                videoDiv.className = 'video-item';
                videoDiv.setAttribute('data-category', video.collection);
                videoDiv.onclick = () => playVideo(video.id);
                
                videoDiv.innerHTML = `
                    <div class="video-thumbnail">
                        <img src="${video.thumbnailUrl}" alt="${video.title}"
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDIwMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTIwIiBmaWxsPSIjY2NjY2NjIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iNjAiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzY2NjY2NiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIEltYWdlPC90ZXh0Pgo8L3N2Zz4='">
                    </div>
                    <div class="video-info">
                        <h4>${video.title}</h4>
                        <div class="video-description">${video.description}</div>
                        <div class="video-meta">Views: ${video.views.toLocaleString()} | ${formatDate(video.uploadDate)} | HLS</div>
                        <div class="category-tag">${COLLECTIONS[video.collection]?.name || 'General'}</div>
                    </div>
                `;
                
                gridContainer.appendChild(videoDiv);
            });
        }

        // ============================================
        // VIDEO PLAYER FUNCTIONS
        // ============================================
        
        /**
         * Play video using HLS with iOS optimizations
         * @param {string} videoId - Video ID to play
         */
        function playVideo(videoId) {
            const video = getVideoData(videoId);
            if (!video) {
                console.error('Video not found:', videoId);
                return;
            }

            const playerSection = document.getElementById('playerSection');
            const mainPlayer = document.getElementById('mainPlayer');
            const currentTitle = document.getElementById('currentTitle');
            const currentDescription = document.getElementById('currentDescription');
            const currentStats = document.getElementById('currentStats');

            // Store current video ID
            currentVideoId = videoId;

            // Update player info
            currentTitle.textContent = video.title;
            currentDescription.textContent = video.description;
            
            // Different stats display for iOS vs other platforms
            const platformInfo = isIOS ? 'HLS (iOS Native)' : 'HLS Streaming';
            currentStats.textContent = `Views: ${video.views.toLocaleString()} | Added: ${formatDate(video.uploadDate)} | ${platformInfo}`;
            
            // Show player section
            playerSection.style.display = 'block';
            
            // Initialize HLS player (handles iOS detection internally)
            initializeHLSPlayer(video.hlsUrl);
            
            // Setup custom controls (only for non-iOS)
            if (!isIOS) {
                setupCustomControls();
            } else {
                console.log('Using native iOS controls');
            }
            
            // Handle autoplay differently on iOS
            if (isIOS) {
                // iOS requires user interaction for autoplay
                console.log('iOS detected - autoplay disabled, user must manually start playback');
                
                // Add play button overlay for iOS
                addIOSPlayButton(mainPlayer);
            } else {
                // Auto-play when video is ready on other platforms
                mainPlayer.addEventListener('canplay', function() {
                    mainPlayer.play().catch(function(error) {
                        console.log('Autoplay prevented by browser:', error);
                    });
                }, { once: true });
            }
            
            // Increment view count
            VIDEO_DATABASE[videoId].views++;
            
            // Scroll to player
            playerSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        /**
         * Add iOS-specific play button overlay
         * @param {HTMLVideoElement} video - Video element
         */
        function addIOSPlayButton(video) {
            // Remove existing play button if any
            const existingButton = document.querySelector('.ios-play-overlay');
            if (existingButton) {
                existingButton.remove();
            }
            
            const playOverlay = document.createElement('div');
            playOverlay.className = 'ios-play-overlay';
            playOverlay.style.cssText = `
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.8);
                border-radius: 50%;
                width: 80px;
                height: 80px;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                z-index: 1000;
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 2px solid rgba(255, 255, 255, 0.3);
                transition: all 0.3s ease;
            `;
            
            const playIcon = document.createElement('div');
            playIcon.style.cssText = `
                width: 0;
                height: 0;
                border-left: 20px solid white;
                border-top: 12px solid transparent;
                border-bottom: 12px solid transparent;
                margin-left: 4px;
            `;
            
            playOverlay.appendChild(playIcon);
            video.parentElement.appendChild(playOverlay);
            
            playOverlay.addEventListener('click', function() {
                video.play();
                playOverlay.style.opacity = '0';
                setTimeout(() => playOverlay.remove(), 300);
            });
            
            // Hide overlay when video starts playing
            video.addEventListener('play', function() {
                if (playOverlay) {
                    playOverlay.style.opacity = '0';
                    setTimeout(() => {
                        if (playOverlay.parentElement) {
                            playOverlay.remove();
                        }
                    }, 300);
                }
            });
        }

        // ============================================
        // UTILITY FUNCTIONS
        // ============================================
        
        /**
         * Format date for display
         * @param {string} dateString - ISO date string
         * @returns {string} Formatted date
         */
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }

        /**
         * Filter videos by category
         * @param {string} category - Category to filter by
         */
        function filterByCategory(category) {
            const videoItems = document.querySelectorAll('.video-item');
            const categoryButtons = document.querySelectorAll('.category-button');
            
            // Update active button
            categoryButtons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Filter videos
            videoItems.forEach(item => {
                const itemCategory = item.getAttribute('data-category');
                if (category === 'all' || itemCategory === category) {
                    item.classList.remove('hidden');
                } else {
                    item.classList.add('hidden');
                }
            });
            
            // Update search if there's an active search term
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            if (searchTerm) {
                searchVideos();
            }
        }

        /**
         * Search videos
         */
        function searchVideos() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const videoItems = document.querySelectorAll('.video-item');
            const activeCategory = document.querySelector('.category-button.active').textContent.toLowerCase();
            
            videoItems.forEach(item => {
                const title = item.querySelector('h4').textContent.toLowerCase();
                const description = item.querySelector('.video-description').textContent.toLowerCase();
                const itemCategory = item.getAttribute('data-category');
                
                const matchesSearch = title.includes(searchTerm) || description.includes(searchTerm);
                const matchesCategory = activeCategory === 'all videos' || itemCategory === getCategoryKeyFromName(activeCategory);
                
                if (matchesSearch && matchesCategory) {
                    item.classList.remove('hidden');
                } else {
                    item.classList.add('hidden');
                }
            });

            // Scroll to results on mobile after search
            if (window.innerWidth <= 768 && searchTerm) {
                document.querySelector('.gallery-section').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }
        }

        /**
         * Get category key from display name
         * @param {string} name - Category display name
         * @returns {string} Category key
         */
        function getCategoryKeyFromName(name) {
            for (let key in COLLECTIONS) {
                if (COLLECTIONS[key].name.toLowerCase() === name) {
                    return key;
                }
            }
            return null;
        }

        // ============================================
        // CUSTOM VIDEO CONTROLS
        // ============================================
        
        function setupCustomControls() {
            const video = document.getElementById('mainPlayer');
            const playPauseBtn = document.getElementById('playPauseBtn');
            const progressBar = document.getElementById('progressBar');
            const currentTimeDisplay = document.getElementById('currentTime');
            const durationDisplay = document.getElementById('duration');
            const volumeBar = document.getElementById('volumeBar');
            const bufferBar = document.getElementById('bufferBar');
            const loadingSpinner = document.getElementById('loadingSpinner');

            // Update time displays
            video.addEventListener('loadedmetadata', function() {
                durationDisplay.textContent = formatTime(video.duration);
                loadingSpinner.style.display = 'none';
            });

            video.addEventListener('timeupdate', function() {
                const progress = (video.currentTime / video.duration) * 100;
                progressBar.style.width = progress + '%';
                currentTimeDisplay.textContent = formatTime(video.currentTime);
            });

            video.addEventListener('progress', function() {
                if (video.buffered.length > 0) {
                    const buffered = (video.buffered.end(0) / video.duration) * 100;
                    bufferBar.style.width = buffered + '%';
                }
            });

            video.addEventListener('waiting', function() {
                loadingSpinner.style.display = 'block';
            });

            video.addEventListener('canplay', function() {
                loadingSpinner.style.display = 'none';
            });

            video.addEventListener('play', function() {
                playPauseBtn.textContent = '⏸';
            });

            video.addEventListener('pause', function() {
                playPauseBtn.textContent = '▶';
            });
        }

        function togglePlayPause() {
            const video = document.getElementById('mainPlayer');
            if (video.paused) {
                video.play();
            } else {
                video.pause();
            }
        }

        function stopVideo() {
            const video = document.getElementById('mainPlayer');
            video.pause();
            video.currentTime = 0;
            document.getElementById('playPauseBtn').textContent = '▶';
        }

        function seekVideo(event) {
            const video = document.getElementById('mainPlayer');
            const progressContainer = event.currentTarget;
            const rect = progressContainer.getBoundingClientRect();
            const percent = (event.clientX - rect.left) / rect.width;
            video.currentTime = percent * video.duration;
        }

        function toggleMute() {
            const video = document.getElementById('mainPlayer');
            const volumeIcon = event.currentTarget;
            video.muted = !video.muted;
            volumeIcon.textContent = video.muted ? '🔇' : '🔊';
        }

        function setVolume(event) {
            const video = document.getElementById('mainPlayer');
            const volumeSlider = event.currentTarget;
            const rect = volumeSlider.getBoundingClientRect();
            const percent = (event.clientX - rect.left) / rect.width;
            video.volume = percent;
            document.getElementById('volumeBar').style.width = (percent * 100) + '%';
        }

        function toggleFullscreen() {
            const video = document.getElementById('mainPlayer');
            if (document.fullscreenElement) {
                document.exitFullscreen();
            } else {
                video.requestFullscreen();
            }
        }

        function formatTime(seconds) {
            if (isNaN(seconds) || seconds < 0) return '00:00';
            
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            
            // For videos longer than an hour, show hours
            if (seconds >= 3600) {
                const hours = Math.floor(seconds / 3600);
                const remainingMins = Math.floor((seconds % 3600) / 60);
                return hours + ':' + (remainingMins < 10 ? '0' : '') + remainingMins + ':' + (secs < 10 ? '0' : '') + secs;
            }
            
            // For videos under an hour, just show minutes:seconds
            return (mins < 10 ? '0' : '') + mins + ':' + (secs < 10 ? '0' : '') + secs;
        }

        // ============================================
        // ACTION BUTTON FUNCTIONS
        // ============================================
        
        function shareVideo() {
            const currentTitle = document.getElementById('currentTitle').textContent;
            if (navigator.share) {
                navigator.share({
                    title: currentTitle,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(window.location.href);
                alert('Video link copied to clipboard!');
            }
        }

        function toggleFavorite() {
            alert('Added to favorites! (Feature coming soon)');
        }

        function downloadVideo() {
            if (currentVideoId) {
                const video = getVideoData(currentVideoId);
                if (video) {
                    // For HLS streams, we can't directly download
                    // Instead, provide the HLS URL for external download tools
                    const downloadInfo = `To download this video, use an HLS-compatible downloader with this URL:\n\n${video.hlsUrl}`;
                    
                    if (navigator.clipboard) {
                        navigator.clipboard.writeText(video.hlsUrl);
                        alert('HLS URL copied to clipboard! Use an HLS downloader tool to save this video.');
                    } else {
                        alert(downloadInfo);
                    }
                }
            }
        }

        // ============================================
        // MOBILE OPTIMIZATIONS
        // ============================================
        
        /**
         * Enhanced mobile controls with iOS optimizations
         */
        function handleMobileControls() {
            if (window.innerWidth <= 768) {
                const retroControls = document.getElementById('retroControls');
                
                // Only show custom controls on non-iOS devices
                if (!isIOS && retroControls) {
                    retroControls.style.opacity = '1';
                    
                    const progressContainer = document.querySelector('.progress-container');
                    const volumeSlider = document.querySelector('.volume-slider');

                    if (progressContainer) {
                        // Enhanced touch handling for progress bar
                        let isDragging = false;
                        
                        const handleProgressTouch = function(e) {
                            e.preventDefault();
                            const touch = e.touches ? e.touches[0] : e;
                            const rect = progressContainer.getBoundingClientRect();
                            const percent = Math.max(0, Math.min(1, (touch.clientX - rect.left) / rect.width));
                            const video = document.getElementById('mainPlayer');
                            if (video && video.duration) {
                                video.currentTime = percent * video.duration;
                            }
                        };
                        
                        progressContainer.addEventListener('touchstart', function(e) {
                            isDragging = true;
                            handleProgressTouch(e);
                        }, { passive: false });
                        
                        progressContainer.addEventListener('touchmove', function(e) {
                            if (isDragging) {
                                handleProgressTouch(e);
                            }
                        }, { passive: false });
                        
                        progressContainer.addEventListener('touchend', function() {
                            isDragging = false;
                        });
                    }

                    if (volumeSlider) {
                        // Enhanced touch handling for volume
                        volumeSlider.addEventListener('touchstart', function(e) {
                            e.preventDefault();
                            const touch = e.touches[0];
                            const rect = this.getBoundingClientRect();
                            const percent = Math.max(0, Math.min(1, (touch.clientX - rect.left) / rect.width));
                            const video = document.getElementById('mainPlayer');
                            if (video) {
                                video.volume = percent;
                                document.getElementById('volumeBar').style.width = (percent * 100) + '%';
                            }
                        }, { passive: false });
                    }
                }
            }
        }

        // ============================================
        // KEYBOARD SHORTCUTS
        // ============================================
        
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', function(event) {
                const video = document.getElementById('mainPlayer');
                const playerSection = document.getElementById('playerSection');
                
                // Only handle shortcuts if player is visible and focused
                if (playerSection.style.display === 'none') return;
                
                switch(event.code) {
                    case 'Space':
                        event.preventDefault();
                        togglePlayPause();
                        break;
                    case 'ArrowLeft':
                        event.preventDefault();
                        video.currentTime = Math.max(0, video.currentTime - 10);
                        break;
                    case 'ArrowRight':
                        event.preventDefault();
                        video.currentTime = Math.min(video.duration, video.currentTime + 10);
                        break;
                    case 'ArrowUp':
                        event.preventDefault();
                        video.volume = Math.min(1, video.volume + 0.1);
                        document.getElementById('volumeBar').style.width = (video.volume * 100) + '%';
                        break;
                    case 'ArrowDown':
                        event.preventDefault();
                        video.volume = Math.max(0, video.volume - 0.1);
                        document.getElementById('volumeBar').style.width = (video.volume * 100) + '%';
                        break;
                    case 'KeyF':
                        event.preventDefault();
                        toggleFullscreen();
                        break;
                    case 'KeyM':
                        event.preventDefault();
                        toggleMute();
                        break;
                }
            });
        }

        // ============================================
        // INITIALIZATION
        // ============================================
        
        /**
         * Initialize the entire page with iOS detection
         */
        function initializePage() {
            // Detect iOS first
            detectIOSAndSafari();
            
            populateFeaturedVideos();
            populateCategoryFilters();
            populateVideoGallery();
            handleMobileControls();
            setupKeyboardShortcuts();
            
            // Add iOS-specific optimizations
            if (isIOS) {
                document.body.classList.add('ios-device');
                console.log('🍎 iOS optimizations enabled');
                
                // Disable custom video controls globally on iOS
                const style = document.createElement('style');
                style.textContent = `
                    .retro-controls { display: none !important; }
                    .quality-selector { display: none !important; }
                    .video-element { 
                        -webkit-playsinline: true !important;
                        playsinline: true !important;
                    }
                `;
                document.head.appendChild(style);
                
                // Add iOS-specific touch handling
                document.addEventListener('touchstart', function() {}, { passive: true });
                
                // Prevent zoom on double tap for video controls
                let lastTouchEnd = 0;
                document.addEventListener('touchend', function(event) {
                    const now = (new Date()).getTime();
                    if (now - lastTouchEnd <= 300) {
                        event.preventDefault();
                    }
                    lastTouchEnd = now;
                }, { passive: false });
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            
            // Add smooth scrolling for category filter on mobile
            const categoryFilters = document.querySelector('.category-filters');
            if (categoryFilters && window.innerWidth <= 480) {
                categoryFilters.style.scrollBehavior = 'smooth';
            }

            // Add search functionality on Enter key
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    searchVideos();
                }
            });

            // Real-time search as user types (with debounce)
            let searchTimeout;
            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(searchVideos, 300);
            });

            // iOS-specific initialization
            if (isIOS) {
                // Add viewport meta tag optimization for iOS
                const viewportMeta = document.querySelector('meta[name="viewport"]');
                if (viewportMeta) {
                    viewportMeta.setAttribute('content', 
                        'width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover'
                    );
                }

                // Prevent iOS bounce scrolling on video player
                document.addEventListener('touchmove', function(e) {
                    const video = document.getElementById('mainPlayer');
                    if (video && video.contains(e.target)) {
                        e.preventDefault();
                    }
                }, { passive: false });

                console.log('🍎 iOS-specific initialization complete');
            }
        });

        // Handle window resize with iOS considerations
        window.addEventListener('resize', function() {
            handleMobileControls();
            
            // Handle iOS orientation change
            if (isIOS) {
                setTimeout(function() {
                    const video = document.getElementById('mainPlayer');
                    if (video && !video.paused) {
                        // Force a repaint on iOS after orientation change
                        video.style.transform = 'translateZ(0)';
                        setTimeout(() => {
                            video.style.transform = '';
                        }, 100);
                    }
                }, 500);
            }
        });

        // Enhanced iOS orientation handling
        if (isIOS) {
            window.addEventListener('orientationchange', function() {
                setTimeout(function() {
                    // Recalculate video dimensions after orientation change
                    const video = document.getElementById('mainPlayer');
                    const playerSection = document.getElementById('playerSection');
                    
                    if (video && playerSection.style.display !== 'none') {
                        video.style.width = '100%';
                        video.style.height = 'auto';
                        
                        // Force iOS to recalculate video layout
                        video.load();
                    }
                }, 100);
            });
        }

        // Cleanup HLS instance on page unload
        window.addEventListener('beforeunload', function() {
            if (hlsInstance) {
                hlsInstance.destroy();
            }
        });

        // ============================================
        // iOS-SPECIFIC ENHANCEMENTS
        // ============================================

        /**
         * iOS-specific video error recovery
         */
        function handleIOSVideoError(video) {
            console.log('Handling iOS video error');
            
            const currentSrc = video.src;
            if (currentSrc) {
                // Try to reload the video on iOS
                setTimeout(function() {
                    video.load();
                    console.log('Attempted iOS video reload');
                }, 1000);
            }
        }

        /**
         * Detect iOS Safari specifically for special handling
         */
        function checkiOSSafari() {
            const ua = navigator.userAgent;
            const iOS = /iPad|iPhone|iPod/.test(ua);
            const webkit = /WebKit/.test(ua);
            const iOSSafariCheck = iOS && webkit && !/CriOS|FxiOS|OPiOS|mercury/.test(ua);
            return iOSSafariCheck;
        }

        /**
         * Add iOS-specific video performance optimizations
         */
        function optimizeForIOS() {
            if (!isIOS) return;

            const video = document.getElementById('mainPlayer');
            if (video) {
                // Set iOS-specific attributes
                video.setAttribute('webkit-playsinline', 'true');
                video.setAttribute('playsinline', 'true');
                video.setAttribute('preload', 'metadata');
                
                // Optimize for iOS memory management
                video.addEventListener('loadstart', function() {
                    // Clear any previous video data
                    if (video.src && video.src !== window.location.href) {
                        video.removeAttribute('src');
                        video.load();
                    }
                });

                // Handle iOS-specific events
                video.addEventListener('webkitbeginfullscreen', function() {
                    console.log('iOS fullscreen started');
                });

                video.addEventListener('webkitendfullscreen', function() {
                    console.log('iOS fullscreen ended');
                });

                // iOS-specific error handling
                video.addEventListener('error', function() {
                    handleIOSVideoError(video);
                });
            }
        }

        // ============================================
        // EASY MANAGEMENT HELPERS - ENHANCED FOR iOS
        // ============================================
        
        /**
         * Quick add video helper with iOS testing
         */
        window.quickAddVideo = function(videoId, title, description, collection, featured = false) {
            addVideo(videoId, {
                title: title,
                description: description,
                collection: collection,
                featured: featured
            });
            console.log(`Added video: ${title} (${videoId})`);
            console.log(`HLS URL: ${getBunnyHLSUrl(videoId)}`);
            console.log(`Thumbnail URL: ${getBunnyThumbnailUrl(videoId)}`);
            
            if (isIOS) {
                console.log('🍎 This video will use iOS native HLS playback');
            }
        };

        /**
         * Test HLS URL with iOS-specific checks
         */
        window.testHLSUrl = function(videoId) {
            const hlsUrl = getBunnyHLSUrl(videoId);
            console.log(`Testing HLS URL: ${hlsUrl}`);
            
            if (isIOS) {
                console.log('🍎 Testing on iOS - using native HLS support');
            }
            
            fetch(hlsUrl)
                .then(response => {
                    if (response.ok) {
                        console.log('✅ HLS URL is accessible');
                        return response.text();
                    } else {
                        console.log('❌ HLS URL returned error:', response.status);
                    }
                })
                .then(data => {
                    if (data) {
                        console.log('✅ HLS playlist loaded successfully');
                        console.log('Playlist preview:', data.substring(0, 200) + '...');
                        
                        if (isIOS) {
                            console.log('🍎 iOS will handle quality switching automatically');
                        }
                    }
                })
                .catch(error => {
                    console.log('❌ Error accessing HLS URL:', error);
                    
                    if (isIOS) {
                        console.log('🍎 iOS troubleshooting: Check if video requires user interaction to load');
                    }
                });
        };

        /**
         * iOS-specific diagnostics
         */
        window.iOSDiagnostics = function() {
            const diagnostics = {
                isIOS: isIOS,
                isiOSSafari: isiOSSafari,
                userAgent: navigator.userAgent,
                videoSupport: {
                    hls: document.createElement('video').canPlayType('application/vnd.apple.mpegurl'),
                    mp4: document.createElement('video').canPlayType('video/mp4')
                },
                features: {
                    pictureInPicture: document.pictureInPictureEnabled,
                    fullscreen: document.fullscreenEnabled,
                    touchEvents: 'ontouchstart' in window
                }
            };

            console.log('🍎 iOS Diagnostics:', diagnostics);
            return diagnostics;
        };

        // Log successful iOS optimization loading
        if (isIOS) {
            console.log('🍎 WillTube iOS optimizations loaded successfully!');
            console.log('📱 Native iOS video controls will be used');
            console.log('🔧 Use iOSDiagnostics() for device info');
        }

        console.log('🎬 WillTube HLS Edition with iOS Support loaded successfully!');
        console.log('📹 Use quickAddVideo() to add new videos');
        console.log('🔧 Use testHLSUrl() to test video connectivity');
        console.log('📊 Use getVideoAnalytics() for statistics');
        console.log('🍎 iOS devices will use native controls automatically');
            populateVideoGallery();
            handleMobileControls();
            setupKeyboardShortcuts();
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            
            // Add smooth scrolling for category filter on mobile
            const categoryFilters = document.querySelector('.category-filters');
            if (categoryFilters && window.innerWidth <= 480) {
                categoryFilters.style.scrollBehavior = 'smooth';
            }

            // Add search functionality on Enter key
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    searchVideos();
                }
            });

            // Real-time search as user types (with debounce)
            let searchTimeout;
            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(searchVideos, 300);
            });
        });

        // Handle window resize
        window.addEventListener('resize', function() {
            handleMobileControls();
        });

        // Cleanup HLS instance on page unload
        window.addEventListener('beforeunload', function() {
            if (hlsInstance) {
                hlsInstance.destroy();
            }
        });

        // ============================================
        // EASY MANAGEMENT HELPERS - USE THESE TO ADD CONTENT
        // ============================================
        
        /**
         * Quick add video helper - use this in browser console
         * Example: quickAddVideo('your-video-id', 'My Video Title', 'Description here', 'tutorials', true)
         */
        window.quickAddVideo = function(videoId, title, description, collection, featured = false) {
            addVideo(videoId, {
                title: title,
                description: description,
                collection: collection,
                featured: featured
            });
            console.log(`Added video: ${title} (${videoId})`);
            console.log(`HLS URL: ${getBunnyHLSUrl(videoId)}`);
            console.log(`Thumbnail URL: ${getBunnyThumbnailUrl(videoId)}`);
        };

        /**
         * Quick set featured videos helper
         * Example: quickSetFeatured(['video-id-1', 'video-id-2', 'video-id-3'])
         */
        window.quickSetFeatured = function(videoIds) {
            setFeaturedVideos(videoIds);
            console.log('Featured videos updated:', videoIds);
        };

        /**
         * Log current video database for export
         */
        window.exportVideoDatabase = function() {
            console.log('Current Video Database:');
            console.log(JSON.stringify(VIDEO_DATABASE, null, 2));
        };

        /**
         * Test HLS URL connectivity
         */
        window.testHLSUrl = function(videoId) {
            const hlsUrl = getBunnyHLSUrl(videoId);
            console.log(`Testing HLS URL: ${hlsUrl}`);
            
            fetch(hlsUrl)
                .then(response => {
                    if (response.ok) {
                        console.log('✅ HLS URL is accessible');
                        return response.text();
                    } else {
                        console.log('❌ HLS URL returned error:', response.status);
                    }
                })
                .then(data => {
                    if (data) {
                        console.log('✅ HLS playlist loaded successfully');
                        console.log('Playlist preview:', data.substring(0, 200) + '...');
                    }
                })
                .catch(error => {
                    console.log('❌ Error accessing HLS URL:', error);
                });
        };

        /**
         * Get video analytics summary
         */
        window.getVideoAnalytics = function() {
            const analytics = {
                totalVideos: Object.keys(VIDEO_DATABASE).length,
                totalViews: Object.values(VIDEO_DATABASE).reduce((sum, video) => sum + video.views, 0),
                featuredVideos: Object.values(VIDEO_DATABASE).filter(video => video.featured).length,
                collectionStats: {}
            };

            Object.keys(COLLECTIONS).forEach(collection => {
                const videos = getVideosByCollection(collection);
                analytics.collectionStats[collection] = {
                    count: videos.length,
                    totalViews: videos.reduce((sum, video) => sum + video.views, 0)
                };
            });

            console.log('WillTube Analytics:', analytics);
            return analytics;
        };

        // ============================================
        // ADVANCED FEATURES
        // ============================================

        /**
         * Picture-in-Picture mode support
         */
        function togglePictureInPicture() {
            const video = document.getElementById('mainPlayer');
            
            if (document.pictureInPictureElement) {
                document.exitPictureInPicture();
            } else if (document.pictureInPictureEnabled) {
                video.requestPictureInPicture().catch(error => {
                    console.log('Picture-in-Picture failed:', error);
                });
            }
        }

        // Add Picture-in-Picture button to controls (if supported)
        if (document.pictureInPictureEnabled) {
            document.addEventListener('DOMContentLoaded', function() {
                const retroControls = document.getElementById('retroControls');
                const pipButton = document.createElement('div');
                pipButton.className = 'retro-button';
                pipButton.textContent = 'PiP';
                pipButton.onclick = togglePictureInPicture;
                pipButton.title = 'Picture-in-Picture';
                
                // Insert before fullscreen button
                const fullscreenButton = document.querySelector('.fullscreen-button');
                retroControls.insertBefore(pipButton, fullscreenButton);
            });
        }

        /**
         * Video quality bandwidth monitoring
         */
        function monitorBandwidth() {
            if (hlsInstance && hlsInstance.levels) {
                const currentLevel = hlsInstance.currentLevel;
                const level = hlsInstance.levels[currentLevel];
                
                if (level) {
                    console.log('Current quality:', level.height + 'p', 'Bitrate:', Math.round(level.bitrate / 1000) + 'kbps');
                }
            }
        }

        // Monitor bandwidth every 5 seconds during playback
        setInterval(function() {
            const video = document.getElementById('mainPlayer');
            if (video && !video.paused && !video.ended) {
                monitorBandwidth();
            }
        }, 5000);

        console.log('🎬 WillTube HLS Edition loaded successfully!');
        console.log('📹 Use quickAddVideo() to add new videos');
        console.log('🔧 Use testHLSUrl() to test video connectivity');
        console.log('📊 Use getVideoAnalytics() for statistics');
    </script>
</body>
</html>
